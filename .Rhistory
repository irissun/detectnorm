# getting clean data
library(devtools)
setwd("~/Documents/PhD Thesis R pkg Detecting/R codes/detectnorm")
devtools::load_all()
data("metadat")
setwd("~/Documents/PhD Thesis R pkg Detecting/R codes/")
load("example.Robj")
setwd("~/Documents/PhD Thesis R pkg Detecting/R codes/")
load("example.Robj")
detectnorm::desbeta(vmean = 7.84, vsd = 2.76, lo = 0, hi = 12, showFigure = TRUE)
setwd("~/Documents/GitHub/detectnorm")
devtools::load_all()
detectnorm::desbeta(vmean = 7.84, vsd = 2.76, lo = 0, hi = 12, showFigure = TRUE)
setwd("~/Documents/GitHub/detectnorm")
devtools::load_all()
data('metadat')
devtools::document()
desbeta(vmean=dat$m2[6], vsd=dat$sd2[6],
hi = dat$p.max[6],showFigure = T)
metadat <- dat
desbeta(vmean=metadat$m2[6], vsd=metadat$sd2[6],
hi = metadat$p.max[6],showFigure = T)
?desbeta
desbeta(vmean=metadat$m2[6], vsd=metadat$sd2[6],
hi = metadat$p.max[6],lo = 0,showFigure = T)
metadat$m2[6]
head(metadat)
metadat$m2[6]
metadat$sd2[6]
metadat$p.max[6]
desbeta(vmean = 9.06, vsd = .85, hi = 10, lo = 0, showFigure = T)
destrunc(vmean = 9.06, vsd = .85, hi = 10, lo = 0, showFigure = T)
head(metadat)
ex <- detectnorm(m1i = m1,sd1i = sd1,n1i = n1,hi1i = p.max,lo1i = 0,m2i = m2,sd2i = sd2,n2i = n2, hi2i = p.max,lo2i=0,distri = "beta", data = metadat)
ex
ex <- detectnorm(m1i = m1,sd1i = sd1,n1i = n1,hi1i = p.max,lo1i = 0, distri = "beta", data = metadat)
head(ex,2)
ex <- detectnorm(m1i = m1,sd1i = sd1,n1i = n1,hi1i = p.max,lo1i = 0,m2i = m2,sd2i = sd2,n2i = n2, hi2i = p.max,lo2i=0,distri = "beta", data = metadat)
head(ex)
setwd("~/Documents/GitHub/detectnorm")
devtools::load_all()
library(detectnorm)
data("metadat")
head(metadat)
require("metafor")
head(metadat)
es <- escalc(measure = "SMD", m1i = m1, n1i = n1, sd1i = sd1, m2i = m2, n2i = n2, sd2i = sd2, data = metadat)
es
desbeta(vmean = 27.28, vsd = 3.75, lo = 0, hi = 36,showFigure = TRUE)
desbeta(vmean = 27.28, vsd = 3.75, lo = 0, hi = 36,showFigure = TRUE)
destrunc(vmean = 27.28, vsd = 3.75, lo = 0, hi = 36,showFigure = TRUE)
devtools::load_all()
destrunc(vmean = 27.28, vsd = 3.75, lo = 0, hi = 36,showFigure = TRUE)
destrunc(vmean = 27.28, vsd = 3.75, lo = 8, hi = 34,showFigure = TRUE)
destrunc(vmean = 27.28, vsd = 3.75, lo = 0, hi = 36,showFigure = TRUE)
?nleqslv
destrunc(vmean = 27.41, vsd = 2.23, lo = 0, hi = 32,showFigure = TRUE)
desbeta(vmean = 27.41, vsd = 2.23, lo = 0, hi = 32,showFigure = TRUE)
destrunc(vmean = 27.41, vsd = 2.23, lo = 0, hi = 32,showFigure = TRUE)
devtools::load_all()
destrunc(vmean = 27.41, vsd = 2.23, lo = 0, hi = 32,showFigure = TRUE)
ex <- detectnorm(m1i = m1,sd1i = sd1,n1i = n1,hi1i = p.max,lo1i = 0,m2i = m2,sd2i = sd2,n2i = n2, hi2i = p.max,lo2i=0,distri = "beta", data = metadat)
ex
head(ex)
ex <- detectnorm(m1i = m1,sd1i = sd1,n1i = n1,hi1i = p.max,lo1i = 0,m2i = m2,sd2i = sd2,n2i = n2, hi2i = p.max,lo2i=0,distri = "truncnorm", data = metadat)
head(ex)
citation()
citation("metafor")
citation('rmeta')
install.packages("rmeta")
citation('rmeta')
citation("mvmeta")
install.packages("mvmeta")
citation("mvmeta")
setwd("~/Documents/GitHub/detectnorm")
devtools::load_all()
devtools::document()
.933-.918
2007.181/424
1309.830/424
1276.453/424
2586.283/848
2619.923/875
2676.725/898
2864.097/929
2017.429/424
1105.027/424
1013.690/424
1149.399/424
3268.116/1272
3335.948/1326
.891-
.887
3451.304/1372
3724.208/1434
.887-
.876
setwd("~/Documents/Sleep and Marital Quality Project HKed/MS3_student_covitality")
setwd("~/Documents/Sleep and Marital Quality Project HKed/MS3_student_covitality")
load(file = "fldata.RData")
knitr::opts_chunk$set(echo = TRUE, cache = TRUE)
setwd("~/Documents/Sleep and Marital Quality Project HKed/MS3_student_covitality")
load(file = "fldata.RData")
#load the libraries
library(haven) #read sav file
library(dplyr) #data wrangling
library(lavaan) #sem
library(semPlot) #plot sem
library(tidyverse)
library(knitr)#function kable
#plot sem
library(stringr)
library(DiagrammeR)
library(tidySEM)
library(semTools)
#check missing data
#kable(table_fit)
fldata1$Location <- as.factor(fldata1$Location)
#1. HK; 2: Kowloon; 3: Others
table(fldata1$Location)
fldata2 <- subset(fldata1, !is.na(Location))
fldata1$Location <- as.factor(fldata1$Location)
table(fldata1$Location)
hk <- subset(fldata2, Location == 1)
hk_kow <- subset(fldata2, Location == 1 | Location == 2)
others <- subset(fldata2, Location == 3)
overall.model <- "
#covitality second order; BRS: 6 items
#measurement model
flourishing =~ FS_1 + FS_2 + FS_3 + FS_4 + FS_5 + FS_6 + FS_7 + FS_8
resilience =~ BRS_p1 + BRS_p2 + BRS_p3
gratitude =~  SEHS_P_1 + SEHS_P_2 + SEHS_P_3 + SEHS_P_4
optimism =~ SEHS_P_5 + SEHS_P_6 + SEHS_P_7 + SEHS_P_8
zest =~ SEHS_P_9 + SEHS_P_10 + SEHS_P_11 + SEHS_P_12
persistence =~ SEHS_P_13 + SEHS_P_14 + SEHS_P_15 + SEHS_P_16
prosocial =~ SEHS_P_17 + SEHS_P_18 + SEHS_P_19 + SEHS_P_20
# second order
covitality =~ gratitude + optimism + zest + persistence
"
overall.fit <- cfa(model = overall.model,
data = fldata2,
meanstructure = TRUE,
missing="fiml", estimator = "MLR")
table_fit <- matrix(NA, nrow = 8, ncol = 9)
colnames(table_fit) = c("Model", "x2", "df", "CFI",
"TLI","RMSEA", "RMSEA_lower", "RMSEA_upper", "SRMR")
table_fit[1, ] <- c("Overall Model", round(
fitmeasures(overall.fit, c("chisq", "df", "cfi",
"tli", "rmsea", "rmsea.ci.lower",
"rmsea.ci.upper", "srmr"))
,3))
kable(table_fit)
knitr::opts_chunk$set(echo = TRUE, cache = TRUE)
setwd("~/Documents/Sleep and Marital Quality Project HKed/MS3_student_covitality")
load(file = "fldata.RData")
#load the libraries
library(haven) #read sav file
library(dplyr) #data wrangling
library(lavaan) #sem
library(semPlot) #plot sem
library(tidyverse)
library(knitr)#function kable
#plot sem
library(stringr)
library(DiagrammeR)
library(tidySEM)
library(semTools)
#check missing data
fldata1$Location <- as.factor(fldata1$Location)
#1. HK; 2: Kowloon; 3: Others
#table(fldata1$Location)
fldata2 <- subset(fldata1, !is.na(Location))
#kable(table_fit)
fldata2$Location2 <- ifelse(fldata2$Location == 3, "others", "HKandKowloon")
table(fldata2$Location)
table(fldata2$Location2)
1165.193/424
1481.036/424
2646.229/848
2660.573/875
2683.353/898
2747.253/929
setwd("~/Documents/Sleep and Marital Quality Project HKed/MS3_student_covitality")
#load the libraries
library(haven) #read sav file
library(dplyr) #data wrangling
library(lavaan) #sem
library(semPlot) #plot sem
#plot sem
library(stringr)
library(DiagrammeR)
library(tidySEM)
library(semTools)
library(knitr)
library(equaltestMI)
#read the data
load(file = "fldata.RData")
#read the data
load(file = "fldata.RData")
fldata1$SchReligion <- as.factor(fldata1$SchReligion)
# 1: 163; 2: 298; 4: 280; 5: 101; 7: 328
# 1     佛教
# 2    天主教
# 4    基督教
# 5    道教
# 7   沒有宗教
# HK: 85; Kowloon: 421; Others: 664
table(fldata1$SchReligion)
knitr::opts_chunk$set(echo = TRUE, cache = TRUE)
setwd("~/Documents/Sleep and Marital Quality Project HKed/MS3_student_covitality")
#load the libraries
library(haven) #read sav file
library(dplyr) #data wrangling
library(lavaan) #sem
library(semPlot) #plot sem
library(tidyverse)
library(knitr)#function kable
#plot sem
library(stringr)
library(DiagrammeR)
library(tidySEM)
library(semTools)
#check missing data
# 1佛教; 2天主教; 4基督教; 5道教; 7沒有宗教
fldata1$Religion <- fldata1$SchReligion
table(fldata1)
table(fldata1$Religion)
fldata1$Religion <- recode(fldata1$Religion, `1` = "Eastern Religion",
`2` = "Western Religion", `4` = "Western Religion",
`5` = "Eastern Religion", `6` = "No Religion")
table(fldata1$Religion)
fldata2 <- subset(fldata1, !is.na(Religion))
#kable(table_fit)
eastern <- subset(fldata2, Religion == 1)
#kable(table_fit)
eastern <- subset(fldata2, Religion == "Eastern Religion")
#kable(table_fit)
table(fldata1$Religion)
fldata1$Religion <- recode(fldata1$Religion, `1` = "Eastern Religion",
`2` = "Western Religion", `4` = "Western Religion",
`5` = "Eastern Religion", `7` = "No Religion")
fldata2 <- subset(fldata1, !is.na(Religion))
overall.model <- "
#covitality second order; BRS: 6 items
#covitality second order; BRS: 6 items
#measurement model
#covitality second order; BRS: 6 items
#measurement model
flourishing =~ FS_1 + FS_2 + FS_3 + FS_4 + FS_5 + FS_6 + FS_7 + FS_8
resilience =~ BRS_p1 + BRS_p2 + BRS_p3
gratitude =~  SEHS_P_1 + SEHS_P_2 + SEHS_P_3 + SEHS_P_4
optimism =~ SEHS_P_5 + SEHS_P_6 + SEHS_P_7 + SEHS_P_8
zest =~ SEHS_P_9 + SEHS_P_10 + SEHS_P_11 + SEHS_P_12
persistence =~ SEHS_P_13 + SEHS_P_14 + SEHS_P_15 + SEHS_P_16
prosocial =~ SEHS_P_17 + SEHS_P_18 + SEHS_P_19 + SEHS_P_20
# second order
# second order
covitality =~ gratitude + optimism + zest + persistence
"
overall.fit <- cfa(model = overall.model,
data = fldata2,
meanstructure = TRUE,
missing="fiml", estimator = "MLR")
#kable(table_fit)
table(fldata1$Religion)
eastern <- subset(fldata2, Religion == "Eastern Religion")
western <- subset(fldata2, Religion == "Western Religion")
noreligion <- subset(fldata2, Religion == "No Religion")
#summary(overall.fit, fit.measures = TRUE, standardized = TRUE, rsq = TRUE)
table_fit <- matrix(NA, nrow = 8, ncol = 9)
colnames(table_fit) = c("Model", "x2", "df", "CFI",
"TLI","RMSEA", "RMSEA_lower", "RMSEA_upper", "SRMR")
table_fit[1, ] <- c("Overall Model", round(
fitmeasures(overall.fit, c("chisq", "df", "cfi",
"tli", "rmsea", "rmsea.ci.lower",
"rmsea.ci.upper", "srmr"))
,3))
#kable(table_fit)
table(fldata1$Religion)
eastern <- subset(fldata2, Religion == "Eastern Religion")
western <- subset(fldata2, Religion == "Western Religion")
noreligion <- subset(fldata2, Religion == "No Religion")
#summary(overall.fit, fit.measures = TRUE, standardized = TRUE, rsq = TRUE)
table_fit <- matrix(NA, nrow = 8, ncol = 9)
colnames(table_fit) = c("Model", "x2", "df", "CFI",
"TLI","RMSEA", "RMSEA_lower", "RMSEA_upper", "SRMR")
table_fit[1, ] <- c("Overall Model", round(
fitmeasures(overall.fit, c("chisq", "df", "cfi",
"tli", "rmsea", "rmsea.ci.lower",
"rmsea.ci.upper", "srmr"))
,3))
#kable(table_fit)
table(fldata1$Religion)
eastern <- subset(fldata2, Religion == "Eastern Religion")
western <- subset(fldata2, Religion == "Western Religion")
noreligion <- subset(fldata2, Religion == "No Religion")
eastern.fit <- cfa(model = overall.model,
data = eastern,
meanstructure = TRUE,
missing="fiml", estimator = "MLR")
934.539/424
1241.127/424
1086.010/424
3261.676/1272
3327.614/1326
3394.323/1372
3502.651/1434
devtools::load_all()
version
updateR()
install.packages("updateR")
library(updateR)
packageStatus()
devtools::load_all()
?desbeta
library(detectnorm)
?desbeta
library(detectnorm)
library(usethis)
use_readme_rmd
use_readme_rmd()
devtools::load_all()
devtools::load_all()
usethis::use_mit_license(names = "Rongwei Sun")
usethis::use_mit_license(names = "Rong Wei Sun")
?usethis::use_mit_license
usethis::use_mit_license(copyright_holder = "Rong Wei Sun")
library(detectnorm)
library(detectnorm)
usethis::use_git()
usethis::use_testthat()
devtools::test()
usethis::use_vignette()
library(detectnorm)
